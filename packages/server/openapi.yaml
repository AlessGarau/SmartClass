openapi: 3.0.3
info:
  title: SmartClass API
  description: API for managing smart classroom environments with rooms, equipment, sensors, and lessons
  version: 1.0.0
  contact:
    name: SmartClass Team
    email: contact@smartclass.com

servers:
  - url: http://localhost:3000
    description: Development server

paths:
  /:
    get:
      summary: Health check endpoint
      description: Basic health check to verify server is running
      responses:
        '200':
          description: Server is running
          content:
            text/plain:
              schema:
                type: string
                example: "Wesh les bgs c michou"

  /room:
    get:
      summary: Get all rooms
      description: Retrieve a list of all rooms in the system
      tags:
        - Rooms
      responses:
        '200':
          description: Successfully retrieved rooms
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Room'
              example:
                data:
                  - id: "550e8400-e29b-41d4-a716-446655440000"
                    name: "Room 101"
                    capacity: 25
                    is_enabled: true
                  - id: "550e8400-e29b-41d4-a716-446655440001"
                    name: "Science Lab"
                    capacity: 20
                    is_enabled: true

    post:
      summary: Create a new room
      description: Create a new room in the system
      tags:
        - Rooms
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoomCreateRequest'
            example:
              name: "Room 205"
              capacity: 30
              is_enabled: true
      responses:
        '201':
          description: Room created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Room'
                  message:
                    type: string
              example:
                data:
                  id: "550e8400-e29b-41d4-a716-446655440002"
                  name: "Room 205"
                  capacity: 30
                  is_enabled: true
                message: "Salle créée avec succès"
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                error: "Validation failed"
                message: "Le nom de la salle doit contenir au moins 6 caractères"

components:
  schemas:
    Room:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier for the room
        name:
          type: string
          description: Name of the room
        capacity:
          type: integer
          minimum: 1
          description: Maximum number of students the room can accommodate
        is_enabled:
          type: boolean
          description: Whether the room is currently enabled/available
      required:
        - id
        - name
        - capacity
        - is_enabled

    RoomCreateRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 6
          description: Name of the room (minimum 6 characters)
        capacity:
          type: integer
          minimum: 1
          description: Maximum number of students the room can accommodate
        is_enabled:
          type: boolean
          default: true
          description: Whether the room should be enabled upon creation
      required:
        - name
        - capacity
      example:
        name: "Room 205"
        capacity: 30
        is_enabled: true

    Error:
      type: object
      properties:
        error:
          type: string
          description: Error type
        message:
          type: string
          description: Human-readable error message
      required:
        - error
        - message

tags:
  - name: Rooms
    description: Operations related to classroom management